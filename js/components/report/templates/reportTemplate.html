<div id="reportModal" class="modal fade reportModal">
    <div class="modal-dialog">
        <div id="reportContent" class="modal-content reportDivToPrint">

            <div class="modal-header" id="reportHeader">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-1">
                            <img src="assets/images/solar-app-transparent220x235.png" alt="MN Solar Logo">
                        </div>
                        <div class="col-md-10">
                            <div class="row">
                                <div class="col-md-10 noGutter">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h4 class="modal-title reportSiteTitle">
                                                <%=siteTitle%>
                                            </h4>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    Latitude: <span id="reportLat"></span> &nbsp;Longitude: <span id="reportLng"></span> 
                                    <!-- could not get these to work -AJW
                                       <%=lat.toFixed(4)%> <%=lng.toFixed(4)%>
                                    -->
                                </div>
                            </div>

                        </div>
                        <div class="col-md-1">
                            <button data-target="#reportModal" aria-label="Close" data-dismiss="modal" class="close closeButton pull-right" style="color:black;" type="button"></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-body reportModal-body">
                <div class="container-fluid">

                    <div class="row">
                        <div class="col-md-12">
                            <button type="button" class="btn btn-link editSiteDetails pull-right" data-dismiss="modal" data-toggle="modal" data-target=".editSiteDetailsModal" aria-label="Edit">
                                <span aria-hidden="true">
                                    Customize Report <i class="fa fa-pencil"></i>
                                </span>
                            </button>
                            <div>
                                <strong><%=siteName%></strong><br />
                                <%=siteNotes%>
                            </div>
                        </div>

                    </div>

                    
                    <hr />

                    <div class="row" id="siteImagesRow">
                        <div class="col-md-6 resultsImage">
                            <div>
                                <strong>Solar Map</strong>
                            </div>
                            <div id="reportSolarMap-container">
                            </div>
                        </div>
                        <div class="col-md-6 resultsImage">
                            <div>
                            <button type="button" class="btn btn-link addSolarPanels editButton pull-right" data-dismiss="modal" data-toggle="modal" data-target=".addSolarPanelsModal" aria-label="Edit">
                                <span aria-hidden="true">
                                    Draw Solar Array <i class="fa fa-pencil"></i>
                                </span>
                            </button>
                                <strong>Aerial Map</strong>
                            </div>

                            <div id="reportAerialMap-container">
                                <!--
                                <div id="reportAngleControls" class="input-group">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-danger angleDownButton">
                                            <i class="fa fa-minus"></i>
                                        </button>
                                    </span>
                                    <input type="text" class="form-control" id="reportAngleBox" value="90">
                                    <span class="input-group-btn">
                                        <button type="button" class="btn btn-success angleUpButton">
                                            <i class="fa fa-plus"></i>
                                        </button>
                                    </span>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>

                    <hr />

                    <div class="row">
                        <div class="col-md-12">
                            <div class="reportResults-container">
                            </div>
                        </div>
                    </div>

                    <hr />

                    <div class="row">
                        <div class="col-md-12 reportHeading">
                            <button type="button" class="btn btn-link editSolarCalculator pull-right" data-dismiss="modal" data-toggle="modal" data-target=".editSolarCalculatorModal" aria-label="Edit">
                                <span aria-hidden="true">
                                    Improve Solar Calculations <i class="fa fa-pencil"></i>
                                </span>
                            </button>
                            Solar Calculator:
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <!--<div class="row">
                                <div class="col-md-12">
                                    Average solar insolation per day <%=averagePerDay%> kWh/m<sup>2</sup>
                                </div>
                            </div> -->
                            <table class="table table-bordered table-responsive table-striped table-condensed" style="width:100%; min-width: 450px;">
    <thead>
      <tr class="success">
        <th style="width: 35%;">User Input</th>
        <th style="width: 15%;">Value</th>
        <th style="width: 50%;">Tips and Notes</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Average utility use (per month)</td>
        <td class="userVal"><%=averageUsePerMonth%> kWh</td>
        <td><small>The average Minnesotan uses 800 kWh/month (residential). If you know your own monthly usage, fill it in <a type="button" class="editSolarCalculator" data-dismiss="modal" data-toggle="modal" data-target=".editSolarCalculatorModal" aria-label="Edit">here</a>.</small></td>
      </tr>
      <tr>
        <td>Cost / kWh</td>
        <td class="userVal">$<%=costPerkWh%>/kWh</td>
        <td><small>Minnesota's average residential cost of electricity is $0.12/kWh. If you know your exact cost of electricity enter it <a type="button" class="editSolarCalculator" data-dismiss="modal" data-toggle="modal" data-target=".editSolarCalculatorModal" aria-label="Edit">here</a>.</small></td>
      </tr>
      <tr>
        <td>Desired percent of electricity covered by solar</td>
        <td class="userVal"><%=percentElectricGoal%>%</td>
        <td><small>Experiment with different percentages <a type="button" class="editSolarCalculator" data-dismiss="modal" data-toggle="modal" data-target=".editSolarCalculatorModal" aria-label="Edit">here</a> to see how system cost varies. Think about how energy efficiency improvements  bring down the cost of your solar system.</small></td>
      </tr>
    </tbody>
    <thead>
      <tr class="warning">
        <th>Outputs</th>
        <th>Value</th>
        <th>Tips and Notes</th>
      </tr>
    </thead>
    <tbody>
        <tr>
            <td>Size of system needed</td>
            <td class="outputVal"><%=systemSize.toFixed(2)%> kW</td>
            <td><small>Result is based on values provided for monthly electricity use and desired percentage covered by solar. It also includes a derate of 0.77.</small></td>
        </tr>
        <tr>
            <td>System cost estimate</td>
            <td class="outputVal"><%=averageCostSystemAsCurrency%></td>
            <td><small>Result is based on an average Made-In Minnesota system cost of $3,750 per kW.</small></td>
        </tr>
        <tr>
            <td>Payback without incentives</td>
            <td class="outputVal"><%=paybackWithoutIncentives.toFixed(2)%> years</td>
            <td><small>Result assumes that electricity costs will rise 3.5% each year over 25 years.</small></td>
        </tr>
        <tr>
            <td>Payback with Tax Credit</td>
            <td class="outputVal"><%=paybackWithTaxCredit.toFixed(2)%> years</td>
            <td><small>Your system may be eligible for a federal tax credit (through December 2016). This result shows the payback of your system with the 30% tax credit applied.</small></td>
        </tr>
        <tr>
            <td>Payback with Tax Credit and MiM Incentive</td>
            <td class="outputVal"><%=paybackWithMim.toFixed(2)%> years</td>
            <td><small>The Made in Minnesota Solar program is a performance-based incentive for solar systems manufactured in Minnesota. Incentives are awarded through a lottery process and on average cover 40% of installed costs. <a href="<%=madeInMn%>" target="_blank">Read More &raquo;</a></small></td>
        </tr>
    </tbody>
  </table>
            
            </div> <!-- /.col-md-12 -->
        </div> <!-- /.row -->

        <div class="row">
            <div class="col-md-12"> 

                    <div class="row reportHisto">
                        <div class="col-md-6 reportHisto">
                            <div class="reportTitle">
                                Insolation Chart
                            </div>
                            <div id="reportResultsHisto">
                            </div>
                        </div>
                        <div class="col-md-6 reportHisto" id="reportResultsTable">
                            Insol Table
                            <table class="reportTable">
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row reportHisto">
                        <div class="col-md-6 reportHisto">
                            <div class="reportTitle">
                                Sun Hours Chart
                            </div>
                            <div id="reportSunHrsHisto">
                            </div>
                        </div>
                        <div class="col-md-6 reportHisto" id="reportSunHrsTable">
                            Sun Hours Table
                            <table class="reportTable">
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row reportHisto">
                        <div class="col-md-6 reportHisto">
                            <div class="reportTitle">
                                Shade Hours Chart
                            </div>
                            <div id="reportShadeHrsHisto">
                            </div>
                        </div>

                        <div class="col-md-6 reportHisto" id="reportShadeHrsTable">
                            Shade Hours Table
                            <table class="reportTable">
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer reportFooter">
                <!-- <button type="button" class="btn btn-default downloadButton">Download PDF</button> -->
                <button type="button" id="pdfButton" class="btn btn-primary printButton">PDF</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade editSolarCalculatorModal" tabindex="-1" role="dialog" aria-labelledby="editSolarCalculatorModal" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content editSolarCalculatorModalContent">
            <div class="modal-header">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            Enter Solar Calculator Variables:
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            Average Use Per Month:
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control solarCalculatorValue" id="averageUsePerMonth" value=<%=averageUsePerMonth%>>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Cost Per kWh:
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control solarCalculatorValue" id="costPerkWh" value=<%=costPerkWh%>>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Percent Electric Goal:
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control solarCalculatorValue" id="percentElectricGoal" value=<%=percentElectricGoalRaw%>>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default cancelEditModal" data-dismiss="modal" data-toggle="modal" data-target=".reportModal">Cancel</button>
                <button type="button" class="btn btn-default restoreDefaultsButton" data-dismiss="modal" data-toggle="modal" data-target=".reportModal">Restore Defaults</button>
                <button type="button" class="btn btn-default saveEditModal" data-dismiss="modal" data-toggle="modal" data-target=".reportModal">Save and Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade editSiteDetailsModal" tabindex="-1" role="dialog" aria-labelledby="editSolarCalculatorModal" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-sm">
        <div class="modal-content editSiteDetailsModal">
            <div class="modal-header">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            Enter Site Details:
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            Site Title:
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control siteDetailsValue" id="siteTitle" value="<%=siteTitle%>">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Site Name:
                        </div>
                        <div class="col-md-6">
                            <input type="text" class="form-control siteDetailsValue" id="siteName" value="<%=siteName%>">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Site Notes:
                        </div>
                        <div class="col-md-6">
                            <input type="textarea" class="form-control siteDetailsValue" id="siteNotes" value="<%=siteNotes%>">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default cancelEditModal" data-dismiss="modal" data-toggle="modal" data-target=".reportModal">Cancel</button>
                <button type="button" class="btn btn-default saveSiteDetailsModal" data-dismiss="modal" data-toggle="modal" data-target=".reportModal">Save and Close</button>
            </div>
        </div>
    </div>
</div>